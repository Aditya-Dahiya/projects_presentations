---
title: "Analysis of the NFHS-5 Data"
author: "Aditya Dahiya"
date: "2024-08-08"
subtitle: "................................."
categories:
  - "NFHS-5"
image: "thumbnails/nfhs_basic_analysis.png"
format:
  html:
    code-fold: true
editor_options: 
  chunk_output_type: console
execute: 
  error: false
  message: false
  warning: false
  eval: false
filters:
  - social-share
share:
  permalink: "https://aditya-dahiya.github.io/session_presentations/data_vizs.html"
  twitter: true
  linkedin: true
  email: true
  mastodon: true
bibliography: references.bib
---

![.............................](nfhs_basic_analysis.png){#fig-1 width="900"}

### **How I made this graphic?**

Loading libraries & cleaning the data to make it in a tidy format

```{r}
#| label: setup

# Data Import and Wrangling Tools
library(tidyverse)            # All things tidy
library(sf)                   # Map of India

rawdf <- readxl::read_xls("nfhs_5/NFHS_5_Factsheets_Data.xls")

df_indicators <- tibble(
  indicator = names(rawdf)
) |> 
  slice(3:n()) |> 
  mutate(
    ind_id = row_number()
  ) |> 
  relocate(ind_id)

df <- rawdf |> 
  mutate(across(-c(1:2), as.numeric)) |>
  pivot_longer(
    cols = -c(`States/UTs`, Area),
    names_to = "indicator",
    values_to = "value"
  ) |> 
  rename(state  = `States/UTs`, area = Area) |> 
  left_join(df_indicators)

# Get State Map of India
india_state_map <- read_sf(here::here(
  "data", "india_map", "India_State_Boundary.shp"
)) |> 
  # During interations, using lower resolution for quick plotting
  st_simplify(dTolerance = 5000) |> 
  st_transform(crs = 4326) |> 
  mutate(state = case_when(
    State_Name == "Andaman & Nicobar" ~ "Andaman & Nicobar Islands",
    State_Name == "Daman and Diu and Dadra and Nagar Haveli" ~ "Dadra and Nagar Haveli & Daman and Diu",
    State_Name == "Jammu and Kashmir" ~ "Jammu & Kashmir",
    State_Name == "Maharashtra" ~ "Maharastra",
    State_Name == "Delhi" ~ "NCT of Delhi",
    State_Name == "Telengana" ~ "Telangana",
    State_Name == "Tamilnadu" ~ "Tamil Nadu",
    State_Name == "Chhattishgarh" ~ "Chhattisgarh",
    .default = State_Name
    ),
    .keep = "unused"
  )
```

Data Wrangling

```{r}
#| label: india-map

df_indicators |> 
  print(n = Inf)
df |> 
  filter(ind_id %in% c(28)) |> 
  filter(area == "Total") |> 
  left_join(india_state_map) |> 
  ggplot(aes(fill = value, geometry = geometry)) +
  geom_sf(colour = "white") +
  paletteer::scale_fill_paletteer_c("grDevices::Red-Purple", direction = -1) +
  facet_wrap(~ind_id) +
  ggthemes::theme_map()
```

Data Wrangling

Visualization

```{r}
#| label: libraries-viz-params

library(scales)               # Nice Scales for ggplot2
library(fontawesome)          # Icons display in ggplot2
library(ggtext)               # Markdown text support for ggplot2
library(showtext)             # Display fonts in ggplot2
library(colorspace)           # Lighten and Darken colours
library(seecolor)             # To print and view colours
library(patchwork)            # Combining plots
```
